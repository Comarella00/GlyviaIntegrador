<app-header></app-header>

<div class="header">
  <h2>Adicionar Glicemia</h2>
</div>

<div class="container">
  <!-- COLUNA 1 - Adicionar Glicemia -->
  <div class="card addGlicemia">
    <div class="headerAddGlicemia">
      <h2>Adicionar Glicemia</h2>
    </div>

    <br />
    <label for="nivel">Nível de glicose:</label>
    <div class="inputGroup">
      <input id="nivel" type="number" placeholder="Digite o valor" [(ngModel)]="nivel" />
      <span>mg/dL</span>
    </div>

    <label for="data">Data:</label>
    <div class="inputGroup">
      <input id="data" type="date" [(ngModel)]="data" />
    </div>

    <label for="hora">Horário:</label>
    <div class="inputGroup">
      <input id="hora" type="time" [(ngModel)]="hora" />
    </div>

    <button class="btnAdicionar" (click)="adicionar()">Adicionar</button>
  </div>

  <!-- COLUNA 2 - Histórico Recente -->
  <div class="card historicoRecente">
    <div class="headerHistorico">
      <h2>Histórico Recente</h2>
      <button class="btnEditar">
        <img src="../../../icons/pencil.png" alt="Editar" />
      </button>
    </div>

    <div class="item" *ngFor="let item of historico | slice:0:4">
      <div class="valor">{{ item.valorGlicemia }} mg/dL</div>
      <div class="hora">{{ item.horaGlicemia }}</div>
      <div
        class="status"
        [ngClass]="{
          verde: item.status === 'Normal',
          amarelo: item.status === 'Glicemia Baixa',
          vermelho: item.status === 'Glicemia Alta'
        }"
      >
        {{ item.status }}
      </div>
    </div>
  </div>

  <!-- COLUNA 3 - Resumo -->
  <div class="card resumo">
    <div class="tabs">
      <button
        class="tab"
        [class.ativo]="resumoSelecionado === 'hoje'"
        (click)="selecionarResumo('hoje')">Hoje</button>
      <button
        class="tab"
        [class.ativo]="resumoSelecionado === 'semana'"
        (click)="selecionarResumo('semana')">Semana</button>
      <button
        class="tab"
        [class.ativo]="resumoSelecionado === 'mes'"
        (click)="selecionarResumo('mes')">Mês</button>
    </div>

    <div class="lista">
      <div class="linha" *ngFor="let item of historicoFiltrado">
        <div class="valor">{{ item.valorGlicemia }} mg/dL</div>
        <div
          class="status"
          [ngClass]="{
            verde: item.status === 'Normal',
            amarelo: item.status === 'Glicemia Baixa',
            vermelho: item.status === 'Glicemia Alta'
          }"
        >
          {{ item.status }}
        </div>
      </div>

      <!-- Caso não haja registros -->
      <div class="sem-dados" *ngIf="historicoFiltrado.length === 0">
        Nenhum registro encontrado para {{ resumoSelecionado }}.
      </div>
    </div>

    <button class="btnPdf">Exportar PDF</button>
  </div>
</div>

<div class="info-glicemia">
  <img src="icons/warning.png" alt="Alerta">
  <p>
    <strong>Os ideais glicêmicos devem ser ajustados com seu médico. Glyvia utiliza ideais glicêmicos gerais.</strong>
  </p>
  <div class="statuscores">
    <ul>
      <li class="baixa"><strong>Baixa:</strong> abaixo de 70</li>
      <li class="normal"><strong>Normal/ideal:</strong> entre 70 a 150</li>
      <li class="alta"><strong>Alta:</strong> acima de 200/250</li>
    </ul>
  </div>
</div>
